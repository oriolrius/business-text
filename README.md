# Business Text for Grafana - Enhanced Edition

## ğŸ™ Tribute to Volkov Labs

We want to start by expressing our **deepest gratitude and admiration** to the incredible team at **Volkov Labs** - true **Grafana gurus** who have revolutionized the Grafana ecosystem with their outstanding Business Suite plugins. Their innovative approach to creating intuitive, powerful, and well-documented plugins has set the gold standard for the entire Grafana community.

**Volkov Labs**, your dedication to open-source excellence, comprehensive documentation, and educational content has inspired thousands of developers and organizations worldwide. Your Business Text panel plugin provided the perfect foundation that enabled us to build something even more powerful while maintaining the elegant simplicity that makes your work so exceptional.

This enhanced version stands on the shoulders of giants - **thank you for being the pioneers who made this possible!** ğŸš€

---

## ğŸŒŸ What's New in This Enhanced Edition

This enhanced version of the Business Text panel builds upon Volkov Labs' excellent foundation with **game-changing new features** that transform it from a text visualization panel into a **comprehensive data management and visualization platform**.

### ğŸ—„ï¸ **Universal Database Integration** *(Revolutionary Feature)*
- **Complete CRUD Operations**: Full Create, Read, Update, Delete functionality directly in Grafana
- **Multi-Database Support**: Works with PostgreSQL, SQLite, MySQL, and any Grafana data source
- **Interactive Data Management**: Real-time editing of database records with inline table interface
- **Smart Keyboard Navigation**: Seamless Tab/Shift+Tab navigation between editable cells
- **Visual Data Validation**: Real-time feedback with color-coded validation states
- **Flexible Setup**: Works with existing databases or demo configurations

### âš¡ **Advanced Backend Infrastructure**
- **Go Backend Implementation**: High-performance server-side HTTP request handling
- **CORS Bypass Solution**: Server-side fetching eliminates browser CORS limitations
- **Multi-Tier Fallback Strategy**: Backend â†’ Proxy â†’ Direct fetching with intelligent failover
- **Resource Endpoint**: Custom `/fetch-content` endpoint for secure external content access
- **Build Integration**: Seamless development and production workflow automation

### ğŸ“ **Enhanced Content Editors**
- **Remote URL Fetching**: Direct import of styles, scripts, and helpers from remote URLs
- **Auto-Content Downloading**: Intelligent automatic fetching of missing content
- **Content Preservation**: Revolutionary text area protection during refresh operations
- **Multi-Format Support**: Enhanced support for CSS, JavaScript, and HTML content
- **Smart State Management**: Prevents data loss during refresh and update operations

### ğŸ”„ **Data Source Integration Framework**
- **Universal Query Execution**: Execute queries against any Grafana data source from JavaScript
- **Multi-Database Support**: PostgreSQL, MySQL, SQLite, Infinity, and any custom data sources
- **Variable Integration**: Seamless integration with Grafana dashboard variables
- **Error Handling**: Comprehensive error management with user-friendly notifications
- **TypeScript Support**: Full type safety for data source operations

### ğŸ›ï¸ **Advanced UI Components**
- **Drag-and-Drop Interface**: Intuitive reordering of content partials
- **Font Awesome Integration**: Professional icons throughout the interface
- **Theme Integration**: Full support for Grafana light/dark themes
- **Notification System**: Rich success/error notifications with detailed feedback
- **Responsive Design**: Optimized for all screen sizes and devices

### ğŸ§ª **Comprehensive Testing Infrastructure**
- **Security Testing**: Dedicated Playwright tests for security validation
- **Coverage Reporting**: Detailed HTML coverage reports with 90%+ coverage
- **Mock Implementations**: Complete mocking for Canvas API, IntersectionObserver, D3, OpenLayers
- **Integration Testing**: End-to-end testing with real database operations
- **Development Environment**: Docker-based development with hot reloading

---

## ğŸ¨ **Revolutionary User Experience Advantages**

### ğŸ¯ **Complete Creative Freedom Without Plugin Development**
This enhanced Business Text panel transforms how you create custom visualizations in Grafana. Instead of developing complex plugins, you now have **complete freedom** to create any user interface using familiar web technologies:

- **ğŸ¨ Custom HTML**: Design any layout, from simple tables to complex interactive dashboards
- **ğŸ’» Custom JavaScript**: Implement any logic, from data processing to real-time interactions
- **ğŸ­ Custom CSS**: Style everything exactly as you envision, with full control over appearance
- **ğŸ”„ Real-time Data Integration**: Connect directly to any Grafana data source with live updates

### ğŸ§¬ **Seamless Grafana Integration**
Your custom visualizations automatically inherit all Grafana capabilities:

- **ğŸŒ— Theme Inheritance**: Automatically adapts to Grafana's light/dark themes
- **ğŸ“Š Data Source Access**: Query any configured data source (PostgreSQL, MySQL, InfluxDB, Prometheus, etc.)
- **ğŸ”§ Dashboard Variables**: Use Grafana variables directly in your custom code
- **ğŸ“± Responsive Design**: Works perfectly on all devices and screen sizes
- **ğŸ”„ Real-time Updates**: Automatic refresh when dashboard data changes

### ğŸš€ **Rapid Prototyping & Development**
- **âš¡ Instant Feedback**: See changes immediately without compilation or deployment
- **ğŸ”§ Live Editing**: Modify HTML, CSS, and JavaScript directly in Grafana's Monaco editor
- **ğŸ“š Rich API Access**: Access to all Grafana APIs, data sources, and dashboard context
- **ğŸ¯ No Build Process**: Skip complex plugin development workflows

### ğŸ’¡ **Real-World Applications**
Transform your dashboards with unlimited possibilities:

- **ğŸ“Š Interactive Tables**: Create editable tables with real-time database updates
- **ğŸ® Custom Controls**: Build unique UI controls for dashboard interaction
- **ğŸ“ˆ Advanced Charts**: Combine multiple chart libraries with Grafana data
- **ğŸ”” Smart Notifications**: Create custom alert interfaces with rich formatting
- **ğŸ“‹ Forms & Input**: Build data entry forms that write directly to databases
- **ğŸ¨ Branded Dashboards**: Create pixel-perfect interfaces matching your brand

### ğŸ”„ **Database CRUD Revolution**
The most powerful feature - direct database manipulation from visualizations:

- **âœï¸ Inline Editing**: Click any data cell to edit database records directly
- **â• Create Records**: Add new database entries without leaving Grafana
- **ğŸ—‘ï¸ Delete Operations**: Remove records with confirmation and validation
- **ğŸ”„ Real-time Sync**: Changes reflect immediately across all connected panels
- **ğŸ¯ Multi-Database**: Works with PostgreSQL, MySQL, SQLite, and any SQL database

### ğŸ­ **Content Management Made Simple**
- **ğŸŒ Remote Content**: Import HTML, CSS, and JavaScript from external URLs
- **ğŸ’¾ Content Preservation**: Your edits are never lost during refreshes
- **ğŸ”„ Auto-sync**: Automatically fetch updated content from remote sources
- **ğŸ“ Version Control**: Manage different versions of your custom content

### ğŸ¤– **Modern Development Workflow with GenAI**
Thanks to the remote URL fetching capability, you can now leverage the **full power of modern development tools** for creating Grafana visualizations:

#### ğŸ™ **Git-Based Development**
- **ğŸ“‚ External Repositories**: Store your HTML, CSS, and JavaScript files in any Git repository
- **ğŸŒ Direct Integration**: Point Grafana panels directly to raw GitHub/GitLab URLs
- **ğŸ”„ Live Updates**: Changes in your repo automatically reflect in Grafana dashboards
- **ğŸ‘¥ Team Collaboration**: Multiple developers can work on visualizations using standard Git workflows

#### ğŸ§  **GenAI-Powered Development**
- **ğŸ¤– Claude Code**: Use AI assistants to generate, debug, and enhance your visualization code
- **âš¡ GitHub Copilot**: Get intelligent code suggestions while developing custom panels
- **ğŸ¯ AI-Driven Design**: Describe your visualization needs and let AI generate the implementation
- **ğŸ”§ Smart Debugging**: AI tools can analyze and fix issues in your custom code

#### ğŸš€ **Revolutionary Development Flow**
```
1. ğŸ’­ Describe your visualization idea to AI
2. ğŸ¤– AI generates HTML/CSS/JS code
3. ğŸ“‚ Push code to your Git repository  
4. ğŸ”— Link Grafana panel to repo URLs
5. ğŸ¯ Instant visualization in Grafana
6. ğŸ”„ Iterate with AI assistance
7. ğŸš€ Deploy across multiple dashboards
```

#### ğŸ’¡ **Real-World Workflow Examples**
- **ğŸ¨ Design Systems**: Maintain a Git repo with your organization's visualization components
- **ğŸ“Š Template Libraries**: Create reusable visualization templates with AI assistance
- **ğŸ”§ Rapid Prototyping**: Use AI to quickly generate proof-of-concept visualizations
- **ğŸ“š Documentation**: AI-generated comments and documentation for your custom code
- **ğŸ§ª Testing**: AI-assisted test generation for your visualization components

This combination of **remote content fetching + Git repositories + GenAI tools** creates an unprecedented development experience where you can build sophisticated Grafana visualizations with the same modern workflows used in contemporary web development!

---

## ğŸ“Š Feature Comparison: Enhanced vs Original

| Feature | Original Volkov Labs | Enhanced Edition | Enhancement Level |
|---------|---------------------|------------------|-------------------|
| Text Rendering | âœ… Static templates | âœ… Dynamic + Database | ğŸ”¥ Revolutionary |
| Database Integration | âŒ None | âœ… Universal CRUD Operations | ğŸ”¥ Revolutionary |
| Custom Development | âŒ Plugin required | âœ… Complete HTML/CSS/JS Freedom | ğŸ”¥ Revolutionary |
| Backend | âŒ Frontend only | âœ… Go Backend + API | ğŸš€ Enterprise |
| Content Fetching | âœ… Basic remote content | âœ… Multi-tier + Preservation | ğŸ”¥ Revolutionary |
| UI Components | âœ… Good | âœ… Advanced + Drag-Drop | ğŸ’ Professional |
| Testing | âœ… Basic tests | âœ… Comprehensive Suite | ğŸ’ Professional |
| Documentation | âœ… Excellent | âœ… Enhanced + Examples | ğŸ’ Professional |

---

## ğŸš€ Quick Start with Enhanced Features

### 1. **Basic Setup**
```bash
# Install from enhanced repository
git clone https://github.com/oriolrius/business-text.git
cd business-text

# Start with database demo
npm start
```

### 2. **Try the Database Management Demo**
1. Navigate to the Database Management dashboard (SQLite demo included)
2. Click on any data row to edit inline
3. Use Tab/Shift+Tab to navigate between fields
4. See real-time validation and auto-save functionality

### 3. **Test Remote Content Fetching**
1. Go to panel settings â†’ Content Partials
2. Add a new partial with a remote URL
3. Enable "Local Copy" and click "Refresh"
4. Edit the content and refresh again - your changes are preserved!

---

## ğŸ—ï¸ Architecture Overview

```
ğŸ“¦ Enhanced Business Text Panel
â”œâ”€â”€ ğŸ¨ Frontend (React + TypeScript)
â”‚   â”œâ”€â”€ Enhanced Content Editors
â”‚   â”œâ”€â”€ Universal Database Management UI
â”‚   â”œâ”€â”€ Advanced Partials Editor
â”‚   â””â”€â”€ Real-time Validation System
â”œâ”€â”€ âš¡ Backend (Go)
â”‚   â”œâ”€â”€ Secure HTTP Fetching
â”‚   â”œâ”€â”€ Database Operations
â”‚   â”œâ”€â”€ SSRF Protection
â”‚   â””â”€â”€ Resource Endpoints
â”œâ”€â”€ ğŸ—„ï¸ Database Layer
â”‚   â”œâ”€â”€ Multi-Database Integration
â”‚   â”œâ”€â”€ CRUD Operations
â”‚   â””â”€â”€ Data Validation
â””â”€â”€ ğŸ§ª Testing Suite
    â”œâ”€â”€ Security Tests
    â”œâ”€â”€ Integration Tests
    â””â”€â”€ Coverage Reports
```

---

## ğŸ“š Enhanced Documentation

| Section | Description | Enhanced Features |
|---------|-------------|-------------------|
| [Database Demo Setup](docs/SQLITE_DEMO_SETUP.md) | Database integration guide (SQLite example) | âœ¨ **NEW** |
| [Data Source Integration](docs/DATASOURCE_INTEGRATION.md) | Query any data source from JavaScript | âœ¨ **Enhanced** |
| [Security Features](docs/SECURITY.md) | SSRF protection and authentication | âœ¨ **NEW** |
| [Database Management](docs/DEVICE_MANAGEMENT.md) | Interactive CRUD interface guide | âœ¨ **NEW** |
| [Content Preservation](docs/CONTENT_PRESERVATION.md) | Editor state management | âœ¨ **NEW** |

---

## ğŸ¯ Real-World Use Cases

### ğŸ“± **Database-Driven Data Management**
- Monitor and manage any database records in real-time
- Inline editing of data with multi-database support (PostgreSQL, MySQL, SQLite, etc.)
- Real-time status updates with visual indicators
- Bulk operations with keyboard shortcuts

### ğŸŒ **Dynamic Content Integration**
- Fetch external content from remote URLs seamlessly
- Content preservation during updates and refreshes
- Multi-source content aggregation
- Live updates from external APIs and services

### ğŸ“Š **Advanced Data Visualization**
- Combine multiple data sources in a single panel
- Execute complex queries directly from JavaScript
- Dynamic content generation based on real-time data
- Interactive dashboards with database integration

---

# Original Volkov Labs Documentation

*The following content is from the original excellent Volkov Labs documentation, preserved in its entirety:*

![Text](https://github.com/VolkovLabs/business-text/raw/main/src/img/screenshot.png)

![Grafana](https://img.shields.io/badge/Grafana-12-orange)
![CI](https://github.com/volkovlabs/business-text/workflows/CI/badge.svg)
![E2E](https://github.com/volkovlabs/business-text/workflows/E2E/badge.svg)
[![codecov](https://codecov.io/gh/VolkovLabs/business-text/branch/main/graph/badge.svg)](https://codecov.io/gh/VolkovLabs/business-text)
[![CodeQL](https://github.com/VolkovLabs/business-text/actions/workflows/codeql-analysis.yml/badge.svg)](https://github.com/VolkovLabs/business-text/actions/workflows/codeql-analysis.yml)

## New Plugin Identifier

We're excited to announce an update for the Business Text Panel! The latest version, fully compatible with Grafana 11 and Grafana 12, is now available under our new plugin ID: `volkovlabs-text-panel`. This enhancement ensures seamless integration and improved functionality for your dashboards.

To access the latest version and explore its featuresâ€”such as dynamic text rendering, Markdown support, and JavaScript customizationâ€”please update your installations using the Grafana Plugins Catalog or the Grafana CLI with the new ID. For a step-by-step guide, visit our documentation or watch our latest tutorial video.

## Introduction

The Business Text panel plugin allows you to construct a text visualization template from the values of a dataset returned by a data source query.

[![Business Text plugin for Grafana | Use HTML, Markdown, JavaScript and CSS | Community use cases](https://raw.githubusercontent.com/volkovlabs/business-text/main/img/business-text.png)](https://youtu.be/UVMysEjouNo)

## Requirements

- Business Text panel 6.X requires **Grafana 11** or **Grafana 12**.
- Business Text panel 5.X requires **Grafana 10** or **Grafana 11**.
- Dynamic Text panel 4.X requires **Grafana 9.2** or **Grafana 10**.
- Dynamic Text panel 2.X and 3.X require **Grafana 8.5** or **Grafana 9**.
- Dynamic Text panel 1.X requires **Grafana 7**.

## Getting Started

You can install the Business Text panel from the [Grafana Plugins catalog](https://grafana.com/grafana/plugins/volkovlabs-text-panel/) or use the Grafana command line tool.

For the latter, please use the following command:

```bash
grafana cli plugins install volkovlabs-text-panel
```

[![Install Business Suite plugins in Cloud, OSS, Enterprise | Open source community plugins](https://raw.githubusercontent.com/volkovlabs/.github/main/started.png)](https://youtu.be/1qYzHfPXJF8)

## Highlights

- Uses Monaco Code Editor with automatic JavaScript code formatting.
- Supports [Markdown](https://commonmark.org/help/) and [Handlebars](https://handlebarsjs.com/guide/expressions.html#basic-usage).
- Renders [markdown-it](https://github.com/markdown-it/markdown-it) into HTML elements.
  - Supports the highlighting of code syntax using A11Y styles.
- Provides code sanitization:
  - HTML inside templates is sanitized using [XSS](https://jsxss.com/en/index.html).
  - Can be disabled in the Grafana configuration through the `disable_sanitize_html` parameter.
- Supports display of nested objects using the `{{json object}}` Handlebars helper.
- Supports display of time global variables (`__to` and `__from`) as seconds, ISO timestamps, or formatted using the `dayjs` library.
- Supports adding the Handlebars helpers and event handlers.
- Supports adding CSS styles with dashboard variables.
- Supports internationalization using custom helpers.
- **Data Source Query Integration** - Execute queries against Grafana data sources directly from JavaScript code. [Learn more](docs/DATASOURCE_INTEGRATION.md)

## Documentation

| Section                                                               | Description                                                   |
| --------------------------------------------------------------------- | ------------------------------------------------------------- |
| [Rendering](https://volkovlabs.io/plugins/business-text/content/)     | Explains how to create a visualization template for your data |
| [Recipes](https://volkovlabs.io/plugins/business-text/recipes/)       | Useful snippets that you can use in your templates            |
| [Features](https://volkovlabs.io/plugins/business-text/features/)     | Demonstrates panel features.templates                         |
| [Tutorials](https://volkovlabs.io/plugins/business-text/tutorials/)   | Easy to follow tutorials                                      |
| [Release Notes](https://volkovlabs.io/plugins/business-text/release/) | Stay up to date with the latest features and updates          |

## Business Suite for Grafana

The Business Suite is a collection of open source plugins created and actively maintained by Volkov Labs.

The collection aims to solve the most frequent business tasks by providing an intuitive interface with detailed written documentation, examples, and video tutorials.

[![Business Suite for Grafana](https://raw.githubusercontent.com/VolkovLabs/.github/main/business.png)](https://volkovlabs.io/plugins/)

### Enterprise Support

With the [Business Suite Enterprise](https://volkovlabs.io/pricing/), you're not just getting a product, you're getting a complete support system. You'll have a designated support team ready to tackle any issues.

You can contact us via Zendesk, receive priority in feature requests and bug fixes, meet with us for in-person consultation, and get access to the Business Intelligence. It's a package that's designed to make your life easier.

## Always happy to hear from you

- Ask a question, request a new feature, or report an issue at [GitHub issues](https://github.com/volkovlabs/business-text/issues).
- Subscribe to our [YouTube Channel](https://youtube.com/@volkovlabs) and leave your comments.

## License

Apache License Version 2.0, see [LICENSE](https://github.com/volkovlabs/business-text/blob/main/LICENSE).